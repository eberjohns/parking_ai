<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demo Page</title>
    <link rel="icon" type="image/png" href="./car.png">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="./style.css">
</head>
<body>
<div id="top-navbar" style="position:fixed;top:0;left:0;width:100vw;height:56px;background:#fff;z-index:5000;box-shadow:0 2px 12px rgba(66,133,244,0.08);display:flex;align-items:center;justify-content:space-between;padding:0 32px;">
    <div style="display:flex;align-items:center;gap:12px;">
        <svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="32" height="32" rx="8" fill="#4285f4"/>
            <text x="16" y="22" text-anchor="middle" font-size="18" font-family="Segoe UI, Arial, sans-serif" fill="#fff" font-weight="bold">P</text>
        </svg>
        <span style="font-size: 1.7rem; font-weight: 700; color: #222; letter-spacing: 2px; font-family: 'Segoe UI', Arial, sans-serif;">ParKARO</span>
    </div>
    <div id="custom-loading" style="display:none;align-items:center;gap:10px;">
        <div class="loader"></div>
        <span style="color:#4285f4;font-weight:500;">Loading...</span>
    </div>
</div>

<style>
    .loader {
        border: 4px solid #e3e8f0;
        border-top: 4px solid #4285f4;
        border-radius: 50%;
        width: 28px;
        height: 28px;
        animation: spin 1s linear infinite;
        margin-right: 2px;
    }
    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
</style>

<div id="app-container" style="padding-top:56px;">
        <div id="drive-controls-help" style="position:fixed;left:24px;bottom:24px;z-index:4500;background:rgba(255,255,255,0.97);box-shadow:0 2px 12px rgba(66,133,244,0.10);border-radius:14px;padding:18px 22px 16px 22px;min-width:210px;max-width:320px;">
            <div style="font-weight:600;font-size:16px;color:#222;margin-bottom:8px;letter-spacing:1px;">How to Drive</div>
            <div style="display:flex;align-items:center;gap:10px;margin-bottom:6px;">
                <span style="display:inline-block;width:28px;height:28px;background:#f1f3f4;border-radius:6px;text-align:center;line-height:28px;font-size:18px;font-weight:600;color:#4285f4;">↑</span>
                <span style="display:inline-block;width:28px;height:28px;background:#f1f3f4;border-radius:6px;text-align:center;line-height:28px;font-size:18px;font-weight:600;color:#4285f4;">↓</span>
                <span style="display:inline-block;width:28px;height:28px;background:#f1f3f4;border-radius:6px;text-align:center;line-height:28px;font-size:18px;font-weight:600;color:#4285f4;">←</span>
                <span style="display:inline-block;width:28px;height:28px;background:#f1f3f4;border-radius:6px;text-align:center;line-height:28px;font-size:18px;font-weight:600;color:#4285f4;">→</span>
            </div>
            <div style="font-size:14px;color:#444;">Use arrow keys to move the car.<br>Try diagonal keys for smooth turns!</div>
        </div>
    <div id="map"></div>
    <div id="nearest-parking-bar" style="position:fixed;left:45vw;bottom:32px;z-index:5000;display:flex;align-items:center;justify-content:center;">
        <div style="min-width:220px;max-width:340px;padding:16px 24px;display:flex;align-items:center;gap:16px;background:rgba(255,255,255,0.98);border-radius:18px;box-shadow:0 4px 24px rgba(66,133,244,0.18);border:1px solid #e3e8f0;">
            <svg width="22" height="22" viewBox="0 0 22 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                <rect width="22" height="22" rx="6" fill="#fff"/>
                <text x="11" y="16" text-anchor="middle" font-size="14" font-family="Segoe UI, Arial, sans-serif" fill="#4285f4" font-weight="bold">P</text>
            </svg>
        <div>
            <div style="font-size: 15px; opacity: 0.8; font-weight:600; letter-spacing:1px;">NEAREST PARKING</div>
            <div id="distance-display" style="font-weight: bold; font-size:17px; color:#222;">Searching...</div>
        </div>
        </div>
    </div>
    <div class="hud" id="controls">
        <button class="btn" onclick="startAutoDrive()">Auto-Drive Demo</button>
        <button class="btn btn-green" onclick="findParking()">Find Spot</button>
    </div>
    <div id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-title">
                <h2 id="sidebar-name">St. Thomas College</h2>
                <p id="sidebar-meta">Live Occupancy Feed • <span style="color:#0f9d58">Connecting...</span></p>
            </div>
            <button class="close-btn" onclick="closeSidebar()">×</button>
        </div>
        <div class="sidebar-details" style="padding: 0 20px 20px 20px; color: #444; font-size: 15px;">
            <b>Details:</b>
            <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Pellentesque euismod, urna eu tincidunt consectetur, nisi nisl aliquam nunc, eget aliquam massa nisl quis neque. Proin ac neque nec nisi blandit commodo.</p>
        </div>
        <div id="live-grid-container">
            <img id="live-map-img" src="st_thomas_top_down.png" alt="Live View">
            <div id="live-slots-layer"></div>
        </div>
    </div>
</div>

<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
<script src="./script.js" defer></script>

</body>
</html>